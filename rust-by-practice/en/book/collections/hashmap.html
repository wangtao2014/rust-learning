<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>HashMap - Rust By Practice</title>


        <!-- Custom HTML head -->
        
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="Learn Rust with Example, Exercise and real Practice, written with ❤️ by https://course.rs team">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../theme/style1.css">


    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');
                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }
                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../why-exercise.html"><strong aria-hidden="true">1.</strong> Rust By Practice</a></li><li class="chapter-item expanded "><a href="../elegant-code-base.html"><strong aria-hidden="true">2.</strong> Small projects with Elegant code</a></li><li class="chapter-item expanded "><a href="../variables.html"><strong aria-hidden="true">3.</strong> Variables</a></li><li class="chapter-item expanded "><a href="../basic-types/intro.html"><strong aria-hidden="true">4.</strong> Basic Types</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../basic-types/numbers.html"><strong aria-hidden="true">4.1.</strong> Numbers</a></li><li class="chapter-item "><a href="../basic-types/char-bool-unit.html"><strong aria-hidden="true">4.2.</strong> Char, Bool and Unit</a></li><li class="chapter-item "><a href="../basic-types/statements-expressions.html"><strong aria-hidden="true">4.3.</strong> Statements and Expressions</a></li><li class="chapter-item "><a href="../basic-types/functions.html"><strong aria-hidden="true">4.4.</strong> Functions</a></li></ol></li><li class="chapter-item expanded "><a href="../ownership/intro.html"><strong aria-hidden="true">5.</strong> Ownership and Borrowing</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../ownership/ownership.html"><strong aria-hidden="true">5.1.</strong> Ownership</a></li><li class="chapter-item "><a href="../ownership/borrowing.html"><strong aria-hidden="true">5.2.</strong> Reference and Borrowing</a></li></ol></li><li class="chapter-item expanded "><a href="../compound-types/intro.html"><strong aria-hidden="true">6.</strong> Compound Types</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../compound-types/string.html"><strong aria-hidden="true">6.1.</strong> string</a></li><li class="chapter-item "><a href="../compound-types/array.html"><strong aria-hidden="true">6.2.</strong> Array</a></li><li class="chapter-item "><a href="../compound-types/slice.html"><strong aria-hidden="true">6.3.</strong> Slice</a></li><li class="chapter-item "><a href="../compound-types/tuple.html"><strong aria-hidden="true">6.4.</strong> Tuple</a></li><li class="chapter-item "><a href="../compound-types/struct.html"><strong aria-hidden="true">6.5.</strong> Struct</a></li><li class="chapter-item "><a href="../compound-types/enum.html"><strong aria-hidden="true">6.6.</strong> Enum</a></li></ol></li><li class="chapter-item expanded "><a href="../flow-control.html"><strong aria-hidden="true">7.</strong> Flow Control</a></li><li class="chapter-item expanded "><a href="../pattern-match/intro.html"><strong aria-hidden="true">8.</strong> Pattern Match</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../pattern-match/match-iflet.html"><strong aria-hidden="true">8.1.</strong> match, matches! and if let</a></li><li class="chapter-item "><a href="../pattern-match/patterns.html"><strong aria-hidden="true">8.2.</strong> Patterns</a></li></ol></li><li class="chapter-item expanded "><a href="../method.html"><strong aria-hidden="true">9.</strong> Method & Associated function</a></li><li class="chapter-item expanded "><a href="../generics-traits/intro.html"><strong aria-hidden="true">10.</strong> Generics and Traits</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../generics-traits/generics.html"><strong aria-hidden="true">10.1.</strong> Generics</a></li><li class="chapter-item "><a href="../generics-traits/const-generics.html"><strong aria-hidden="true">10.2.</strong> Const Generics</a></li><li class="chapter-item "><a href="../generics-traits/traits.html"><strong aria-hidden="true">10.3.</strong> Traits</a></li><li class="chapter-item "><a href="../generics-traits/trait-object.html"><strong aria-hidden="true">10.4.</strong> Trait Object</a></li><li class="chapter-item "><a href="../generics-traits/advanced-traits.html"><strong aria-hidden="true">10.5.</strong> Advanced Traits</a></li></ol></li><li class="chapter-item expanded "><a href="../collections/intro.html"><strong aria-hidden="true">11.</strong> Collection Types</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../collections/string.html"><strong aria-hidden="true">11.1.</strong> String</a></li><li class="chapter-item "><a href="../collections/vector.html"><strong aria-hidden="true">11.2.</strong> Vector</a></li><li class="chapter-item expanded "><a href="../collections/hashmap.html" class="active"><strong aria-hidden="true">11.3.</strong> HashMap</a></li></ol></li><li class="chapter-item expanded "><a href="../type-conversions/intro.html"><strong aria-hidden="true">12.</strong> Type Conversion</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../type-conversions/as.html"><strong aria-hidden="true">12.1.</strong> as</a></li><li class="chapter-item "><a href="../type-conversions/from-into.html"><strong aria-hidden="true">12.2.</strong> From/Into</a></li><li class="chapter-item "><a href="../type-conversions/others.html"><strong aria-hidden="true">12.3.</strong> Others</a></li></ol></li><li class="chapter-item expanded "><a href="../result-panic/intro.html"><strong aria-hidden="true">13.</strong> Result and panic</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../result-panic/panic.html"><strong aria-hidden="true">13.1.</strong> panic!</a></li><li class="chapter-item "><a href="../result-panic/result.html"><strong aria-hidden="true">13.2.</strong> Result and ?</a></li></ol></li><li class="chapter-item expanded "><a href="../crate-module/intro.html"><strong aria-hidden="true">14.</strong> Crate and Module</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../crate-module/crate.html"><strong aria-hidden="true">14.1.</strong> Package and Crate</a></li><li class="chapter-item "><a href="../crate-module/module.html"><strong aria-hidden="true">14.2.</strong> Module</a></li><li class="chapter-item "><a href="../crate-module/use-pub.html"><strong aria-hidden="true">14.3.</strong> Advanced use and pub</a></li></ol></li><li class="chapter-item expanded "><a href="../comments-docs.html"><strong aria-hidden="true">15.</strong> Comments and Docs</a></li><li class="chapter-item expanded "><a href="../formatted-output/intro.html"><strong aria-hidden="true">16.</strong> Formatted output</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../formatted-output/println.html"><strong aria-hidden="true">16.1.</strong> println! and format!</a></li><li class="chapter-item "><a href="../formatted-output/debug-display.html"><strong aria-hidden="true">16.2.</strong> Debug and Display</a></li><li class="chapter-item "><a href="../formatted-output/formatting.html"><strong aria-hidden="true">16.3.</strong> formating</a></li></ol></li><li class="chapter-item expanded "><a href="../lifetime/intro.html"><strong aria-hidden="true">17.</strong> Lifetime</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../lifetime/basic.html"><strong aria-hidden="true">17.1.</strong> basic</a></li><li class="chapter-item "><a href="../lifetime/static.html"><strong aria-hidden="true">17.2.</strong> &'static and T: 'static</a></li><li class="chapter-item "><a href="../lifetime/advance.html"><strong aria-hidden="true">17.3.</strong> advanced</a></li></ol></li><li class="chapter-item expanded "><a href="../functional-programing/intro.html"><strong aria-hidden="true">18.</strong> Functional programing</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../functional-programing/closure.html"><strong aria-hidden="true">18.1.</strong> Closure</a></li><li class="chapter-item "><a href="../functional-programing/iterator.html"><strong aria-hidden="true">18.2.</strong> Iterator</a></li></ol></li><li class="chapter-item expanded "><a href="../newtype-sized.html"><strong aria-hidden="true">19.</strong> newtype and DST</a></li><li class="chapter-item expanded "><a href="../smart-pointers/intro.html"><strong aria-hidden="true">20.</strong> Smart pointers TODO</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../smart-pointers/box.html"><strong aria-hidden="true">20.1.</strong> Box</a></li><li class="chapter-item "><a href="../smart-pointers/deref.html"><strong aria-hidden="true">20.2.</strong> Deref</a></li><li class="chapter-item "><a href="../smart-pointers/drop.html"><strong aria-hidden="true">20.3.</strong> Drop</a></li><li class="chapter-item "><a href="../smart-pointers/rc-arc.html"><strong aria-hidden="true">20.4.</strong> Rc and Arc</a></li><li class="chapter-item "><a href="../smart-pointers/cell-refcell.html"><strong aria-hidden="true">20.5.</strong> Cell and RefCell</a></li></ol></li><li class="chapter-item expanded "><a href="../weak.html"><strong aria-hidden="true">21.</strong> Weak and Circle reference TODO</a></li><li class="chapter-item expanded "><a href="../self-referential.html"><strong aria-hidden="true">22.</strong> Self referential TODO</a></li><li class="chapter-item expanded "><a href="../threads/intro.html"><strong aria-hidden="true">23.</strong> Threads TODO</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../threads/basic-using.html"><strong aria-hidden="true">23.1.</strong> Basic using</a></li><li class="chapter-item "><a href="../threads/message-passing.html"><strong aria-hidden="true">23.2.</strong> Message passing</a></li><li class="chapter-item "><a href="../threads/sync.html"><strong aria-hidden="true">23.3.</strong> Sync</a></li><li class="chapter-item "><a href="../threads/atomic.html"><strong aria-hidden="true">23.4.</strong> Atomic</a></li><li class="chapter-item "><a href="../threads/send-sync.html"><strong aria-hidden="true">23.5.</strong> Send and Sync</a></li></ol></li><li class="chapter-item expanded "><a href="../global-variables.html"><strong aria-hidden="true">24.</strong> Global variables TODO</a></li><li class="chapter-item expanded "><a href="../errors.html"><strong aria-hidden="true">25.</strong> Errors TODO</a></li><li class="chapter-item expanded "><a href="../unsafe/intro.html"><strong aria-hidden="true">26.</strong> Unsafe doing</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../unsafe/inline-asm.html"><strong aria-hidden="true">26.1.</strong> Inline assembly</a></li></ol></li><li class="chapter-item expanded "><a href="../macro.html"><strong aria-hidden="true">27.</strong> Macro TODO</a></li><li class="chapter-item expanded "><a href="../tests/intro.html"><strong aria-hidden="true">28.</strong> Tests TODO</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../tests/write-tests.html"><strong aria-hidden="true">28.1.</strong> Write Tests</a></li><li class="chapter-item "><a href="../tests/benchmark.html"><strong aria-hidden="true">28.2.</strong> Benchmark</a></li><li class="chapter-item "><a href="../tests/unit-integration.html"><strong aria-hidden="true">28.3.</strong> Unit and Integration</a></li><li class="chapter-item "><a href="../tests/assertions.html"><strong aria-hidden="true">28.4.</strong> Assertions</a></li></ol></li><li class="chapter-item expanded "><a href="../async/intro.html"><strong aria-hidden="true">29.</strong> Async/Await TODO</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../async/async-await.html"><strong aria-hidden="true">29.1.</strong> async and await!</a></li><li class="chapter-item "><a href="../async/future.html"><strong aria-hidden="true">29.2.</strong> Future</a></li><li class="chapter-item "><a href="../async/pin-unpin.html"><strong aria-hidden="true">29.3.</strong> Pin and Unpin</a></li><li class="chapter-item "><a href="../async/stream.html"><strong aria-hidden="true">29.4.</strong> Stream</a></li></ol></li><li class="chapter-item expanded "><a href="../std/intro.html"><strong aria-hidden="true">30.</strong> Standard Library TODO</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../std/String.html"><strong aria-hidden="true">30.1.</strong> String</a></li></ol></li><li class="chapter-item expanded "><a href="../fight-compiler/intro.html"><strong aria-hidden="true">31.</strong> Fighting with Compiler</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../fight-compiler/borrowing.html"><strong aria-hidden="true">31.1.</strong> Borrowing</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Rust By Practice</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/sunface/rust-by-practice" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/sunface/rust-by-practice/edit/master/en/src/collections/hashmap.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <!-- Page table of contents -->
                    <div class="sidetoc"><nav class="pagetoc"></nav></div>
                    <main>
                        <h1 id="hashmap"><a class="header" href="#hashmap">HashMap</a></h1>
<p>Where vectors store values by an integer index, HashMaps store values by key. It is a hash map implemented with quadratic probing and SIMD lookup. By default, <code>HashMap</code> uses a hashing algorithm selected to provide resistance against HashDoS attacks.</p>
<p>The default hashing algorithm is currently <code>SipHash 1-3</code>, though this is subject to change at any point in the future. While its performance is very competitive for medium sized keys, other hashing algorithms will outperform it for small keys such as integers as well as large keys such as long strings, though those algorithms will typically not protect against attacks such as HashDoS.</p>
<p>The hash table implementation is a Rust port of Google’s <a href="https://abseil.io/blog/20180927-swisstables">SwissTable</a>. The original C++ version of SwissTable can be found <a href="https://github.com/abseil/abseil-cpp/blob/master/absl/container/internal/raw_hash_set.h">here</a>, and this <a href="https://www.youtube.com/watch?v=ncHmEUmJZf4">CppCon talk</a> gives an overview of how the algorithm works.</p>
<h3 id="basic-operations"><a class="header" href="#basic-operations">Basic Operations</a></h3>
<ol>
<li>🌟🌟</li>
</ol>
<pre><pre class="playground"><code class="language-rust editable edition2021">
// FILL in the blanks and FIX the errors
use std::collections::HashMap;
fn main() {
    let mut scores = HashMap::new();
    scores.insert(&quot;Sunface&quot;, 98);
    scores.insert(&quot;Daniel&quot;, 95);
    scores.insert(&quot;Ashley&quot;, 69.0);
    scores.insert(&quot;Katie&quot;, &quot;58&quot;);

    // Get returns an Option&lt;&amp;V&gt;
    let score = scores.get(&quot;Sunface&quot;);
    assert_eq!(score, Some(98));

    if scores.contains_key(&quot;Daniel&quot;) {
        // Indexing returns a value V
        let score = scores[&quot;Daniel&quot;];
        assert_eq!(score, __);
        scores.remove(&quot;Daniel&quot;);
    }

    assert_eq!(scores.len(), __);

    for (name, score) in scores {
        println!(&quot;The score of {} is {}&quot;, name, score);
    }
}
</code></pre></pre>
<ol start="2">
<li>🌟🌟</li>
</ol>
<pre><pre class="playground"><code class="language-rust editable edition2021">
use std::collections::HashMap;
fn main() {
    let teams = [
        (&quot;Chinese Team&quot;, 100),
        (&quot;American Team&quot;, 10),
        (&quot;France Team&quot;, 50),
    ];

    let mut teams_map1 = HashMap::new();
    for team in &amp;teams {
        teams_map1.insert(team.0, team.1);
    }

    // IMPLEMENT team_map2 in two ways
    // Tips: one of the approaches is to use `collect` method
    let teams_map2...

    assert_eq!(teams_map1, teams_map2);

    println!(&quot;Success!&quot;);
}
</code></pre></pre>
<ol start="3">
<li>🌟🌟</li>
</ol>
<pre><pre class="playground"><code class="language-rust editable edition2021">
// FILL in the blanks
use std::collections::HashMap;
fn main() {
    // Type inference lets us omit an explicit type signature (which
    // would be `HashMap&lt;&amp;str, u8&gt;` in this example).
    let mut player_stats = HashMap::new();

    // Insert a key only if it doesn't already exist
    player_stats.entry(&quot;health&quot;).or_insert(100);

    assert_eq!(player_stats[&quot;health&quot;], __);

    // Insert a key using a function that provides a new value only if it
    // doesn't already exist
    player_stats.entry(&quot;health&quot;).or_insert_with(random_stat_buff);
    assert_eq!(player_stats[&quot;health&quot;], __);

    // Ensures a value is in the entry by inserting the default if empty, and returns
    // a mutable reference to the value in the entry.
    let health = player_stats.entry(&quot;health&quot;).or_insert(50);
    assert_eq!(health, __);
    *health -= 50;
    assert_eq!(*health, __);

    println!(&quot;Success!&quot;);
}

fn random_stat_buff() -&gt; u8 {
    // Could actually return some random value here - let's just return
    // some fixed value for now
    42
}
</code></pre></pre>
<h3 id="requirements-of-hashmap-key"><a class="header" href="#requirements-of-hashmap-key">Requirements of HashMap key</a></h3>
<p>Any type that implements the <code>Eq</code> and <code>Hash</code> traits can be a key in <code>HashMap</code>. This includes:</p>
<ul>
<li><code>bool</code> (though not very useful since there is only two possible keys)</li>
<li><code>int</code>, <code>uint</code>, and all variations thereof</li>
<li><code>String</code> and <code>&amp;str</code> (tips: you can have a <code>HashMap</code> keyed by <code>String</code> and call <code>.get()</code> with an <code>&amp;str</code>)</li>
</ul>
<p>Note that <code>f32</code> and <code>f64</code> do not implement <code>Hash</code>, likely because <a href="https://en.wikipedia.org/wiki/Floating-point_arithmetic#Accuracy_problems">floating-point precision</a> errors would make using them as hashmap keys horribly error-prone.</p>
<p>All collection classes implement <code>Eq</code> and <code>Hash</code> if their contained type also respectively implements <code>Eq</code> and <code>Hash</code>. For example, <code>Vec&lt;T&gt;</code> will implement <code>Hash</code> if <code>T</code>implements <code>Hash</code>.</p>
<ol start="4">
<li>🌟🌟</li>
</ol>
<pre><pre class="playground"><code class="language-rust editable edition2021">
// FIX the errors
// Tips: `derive` is usually a good way to implement some common used traits
use std::collections::HashMap;

struct Viking {
    name: String,
    country: String,
}

impl Viking {
    /// Creates a new Viking.
    fn new(name: &amp;str, country: &amp;str) -&gt; Viking {
        Viking {
            name: name.to_string(),
            country: country.to_string(),
        }
    }
}

fn main() {
    // Use a HashMap to store the vikings' health points.
    let vikings = HashMap::from([
        (Viking::new(&quot;Einar&quot;, &quot;Norway&quot;), 25),
        (Viking::new(&quot;Olaf&quot;, &quot;Denmark&quot;), 24),
        (Viking::new(&quot;Harald&quot;, &quot;Iceland&quot;), 12),
    ]);

    // Use derived implementation to print the status of the vikings.
    for (viking, health) in &amp;vikings {
        println!(&quot;{:?} has {} hp&quot;, viking, health);
    }
}
</code></pre></pre>
<h3 id="capacity"><a class="header" href="#capacity">Capacity</a></h3>
<p>Like vectors, HashMaps are growable, but HashMaps can also shrink themselves when they have excess space. You can create a <code>HashMap</code> with a certain starting capacity using <code>HashMap::with_capacity(uint)</code>, or use <code>HashMap::new()</code> to get a HashMap with a default initial capacity (recommended).</p>
<h4 id="example"><a class="header" href="#example">Example</a></h4>
<pre><pre class="playground"><code class="language-rust editable edition2021">
use std::collections::HashMap;
fn main() {
    let mut map: HashMap&lt;i32, i32&gt; = HashMap::with_capacity(100);
    map.insert(1, 2);
    map.insert(3, 4);
    // Indeed ,the capacity of HashMap is not 100, so we can't compare the equality here.
    assert!(map.capacity() &gt;= 100);

    // Shrinks the capacity of the map with a lower limit. It will drop
    // down no lower than the supplied limit while maintaining the internal rules
    // and possibly leaving some space in accordance with the resize policy.

    map.shrink_to(50);
    assert!(map.capacity() &gt;= 50);

    // Shrinks the capacity of the map as much as possible. It will drop
    // down as much as possible while maintaining the internal rules
    // and possibly leaving some space in accordance with the resize policy.
    map.shrink_to_fit();
    assert!(map.capacity() &gt;= 2);
    println!(&quot;Success!&quot;);
}
</code></pre></pre>
<h3 id="ownership"><a class="header" href="#ownership">Ownership</a></h3>
<p>For types that implement the <code>Copy</code> trait, like <code>i32</code> , the values are copied into <code>HashMap</code>. For owned values like <code>String</code>, the values will be moved and <code>HashMap</code> will be the owner of those values.</p>
<ol start="5">
<li>🌟🌟</li>
</ol>
<pre><pre class="playground"><code class="language-rust editable edition2021">// FIX the errors with least changes
// DON'T remove any code line
use std::collections::HashMap;
fn main() {
  let v1 = 10;
  let mut m1 = HashMap::new();
  m1.insert(v1, v1);
  println!(&quot;v1 is still usable after inserting to hashmap : {}&quot;, v1);

  let v2 = &quot;hello&quot;.to_string();
  let mut m2 = HashMap::new();
  // Ownership moved here
  m2.insert(v2, v1);
    
  assert_eq!(v2, &quot;hello&quot;);

  println!(&quot;Success!&quot;);
}
</code></pre></pre>
<h3 id="third-party-hash-libs"><a class="header" href="#third-party-hash-libs">Third-party Hash libs</a></h3>
<p>If the performance of <code>SipHash 1-3</code> doesn't meet your requirements, you can find replacements in crates.io or github.com.</p>
<p>The usage of third-party hash looks like this:</p>
<pre><pre class="playground"><code class="language-rust edition2021"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use std::hash::BuildHasherDefault;
use std::collections::HashMap;
// Introduce a third party hash function
use twox_hash::XxHash64;


let mut hash: HashMap&lt;_, _, BuildHasherDefault&lt;XxHash64&gt;&gt; = Default::default();
hash.insert(42, &quot;the answer&quot;);
assert_eq!(hash.get(&amp;42), Some(&amp;&quot;the answer&quot;));
<span class="boring">}
</span></code></pre></pre>

                        <div id="giscus-container"></div>
                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../collections/vector.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../type-conversions/intro.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../collections/vector.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../type-conversions/intro.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script type="text/javascript">
            window.playground_copyable = true;
        </script>

        <script src="../ace.js" type="text/javascript" charset="utf-8"></script>
        <script src="../editor.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mode-rust.js" type="text/javascript" charset="utf-8"></script>
        <script src="../theme-dawn.js" type="text/javascript" charset="utf-8"></script>
        <script src="../theme-tomorrow_night.js" type="text/javascript" charset="utf-8"></script>

        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>
        <script type="text/javascript" charset="utf-8">
        var pagePath = "collections/hashmap.md"
        </script>


        <!-- Custom JS scripts -->
        <script type="text/javascript" src="../assets/custom3.js"></script>
        <script type="text/javascript" src="../assets/lang.js"></script>


    </body>
</html>